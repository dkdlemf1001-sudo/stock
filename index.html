<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>íˆ¬ì Supporter Pro</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #1e3799; --accent: #fa983a; --bg: #f1f2f6; --card: #ffffff; --pos: #eb4d4b; --neg: #0984e3; }
        body { font-family: 'Noto Sans KR', sans-serif; background: var(--bg); margin: 0; padding: 0; }
        header { background: var(--primary); color: white; padding: 40px 20px; text-align: center; }
        .container { max-width: 1000px; margin: -30px auto 50px; padding: 0 15px; }
        .tabs { display: flex; gap: 5px; margin-bottom: 0; }
        .tab { flex: 1; padding: 15px; border: none; border-radius: 12px 12px 0 0; cursor: pointer; font-weight: bold; background: #ced6e0; color: #2f3542; }
        .tab.active { background: var(--card); color: var(--primary); border-top: 5px solid var(--accent); }
        .content { background: var(--card); padding: 25px; border-radius: 0 0 15px 15px; box-shadow: 0 10px 20px rgba(0,0,0,0.05); display: none; }
        .content.active { display: block; }
        .table-wrapper { overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; min-width: 600px; }
        th { text-align: left; color: #747d8c; border-bottom: 2px solid #f1f2f6; padding: 12px; }
        td { padding: 12px; border-bottom: 1px solid #f8f9fa; }
        input { width: 85%; padding: 8px; border: 1px solid #ddd; border-radius: 5px; }
        .btn { padding: 10px 15px; border-radius: 8px; border: none; cursor: pointer; font-weight: bold; transition: 0.2s; }
        .btn-update { background: #2ed573; color: white; margin-bottom: 10px; }
        .btn-add { background: var(--primary); color: white; }
        .recommend-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .rec-card { border: 1px solid #eee; border-radius: 12px; padding: 20px; background: #fff; border-top: 5px solid var(--primary); }
        .rec-card.us { border-top-color: var(--accent); }
        .tag { background: #f1f2f6; padding: 3px 8px; border-radius: 4px; font-size: 0.8em; font-weight: bold; color: var(--primary); }
    </style>
</head>
<body>

<header>
    <h1>íˆ¬ì Supporter Pro</h1>
    <p>ì‹¤ì‹œê°„ ê°€ê²© ì—…ë°ì´íŠ¸ & ë°ì¼ë¦¬ ì¶”ì²œ</p>
</header>

<div class="container">
    <div class="tabs">
        <button class="tab active" onclick="openT(0)">ë‚´ í¬íŠ¸í´ë¦¬ì˜¤</button>
        <button class="tab" onclick="openT(1)">ë°ì¼ë¦¬ ì¶”ì²œ</button>
    </div>

    <div id="c0" class="content active">
        <div style="display:flex; justify-content:space-between; align-items:center;">
            <button class="btn btn-add" onclick="addRow()">+ ì¢…ëª© ì¶”ê°€</button>
            <button class="btn btn-update" onclick="updatePrices()">ğŸ”„ ì‹¤ì‹œê°„ ê°€ê²© ì—…ë°ì´íŠ¸</button>
        </div>
        <div class="table-wrapper">
            <table>
                <thead><tr><th>í‹°ì»¤(ì˜ˆ: AAPL)</th><th>ìˆ˜ëŸ‰</th><th>ë§¤ìˆ˜ê°€</th><th>í˜„ì¬ê°€</th><th>ìˆ˜ìµë¥ </th><th>ê´€ë¦¬</th></tr></thead>
                <tbody id="list"></tbody>
            </table>
        </div>
        <p style="font-size:0.8em; color:gray; margin-top:10px;">* ë¯¸ì¥ì€ í‹°ì»¤(AAPL), êµ­ì¥ì€ ìˆ«ì(005930)ë¥¼ ì…ë ¥í•˜ì„¸ìš”.</p>
    </div>

    <div id="c1" class="content">
        <h2 style="margin-top:0;">ì˜¤ëŠ˜ì˜ ë²„í• ìŠ¤íƒ€ì¼ ì¶”ì²œ ğŸš€</h2>
        <div class="recommend-grid">
            <div class="rec-card">
                <span class="tag">êµ­ë‚´(KOSPI)</span>
                <h3>ì‚¼ì„±ì „ì (005930)</h3>
                <p><strong>ì´ìœ :</strong> ë°˜ë„ì²´ ì‚¬ì´í´ íšŒë³µ ë° ì••ë„ì  ì ìœ ìœ¨. 'í•´ì'ë¥¼ ê°€ì§„ êµ­ë‚´ 1ìœ„ ê¸°ì—….</p>
            </div>
            <div class="rec-card us">
                <span class="tag">ë¯¸ì¥(NASDAQ)</span>
                <h3>NVIDIA (NVDA)</h3>
                <p><strong>ì´ìœ :</strong> AI ì¸í”„ë¼ì˜ ë…ì ì  ê³µê¸‰ì. ë²„í•ì´ ê°•ì¡°í•˜ëŠ” 'ì§€ì† ê°€ëŠ¥í•œ ê²½ìŸ ìš°ìœ„'.</p>
            </div>
        </div>
        <div class="rec-card" style="margin-top:20px; border-top-color:#2ed573;">
            <span class="tag">ì›Œë Œ ë²„í• ê²©ì–¸</span>
            <p style="font-style:italic;">"ê°€ê²©ì€ ë‹¹ì‹ ì´ ì§€ë¶ˆí•˜ëŠ” ê²ƒì´ê³ , ê°€ì¹˜ëŠ” ë‹¹ì‹ ì´ ì–»ëŠ” ê²ƒì´ë‹¤."</p>
        </div>
    </div>
</div>

<script>
    function openT(i) {
        document.querySelectorAll('.content').forEach((c,idx)=>c.classList.toggle('active', i===idx));
        document.querySelectorAll('.tab').forEach((t,idx)=>t.classList.toggle('active', i===idx));
    }

    function addRow(d={}) {
        const tr = document.createElement('tr');
        tr.innerHTML = `
            <td><input type="text" value="${d.n||''}" class="n" placeholder="ì˜ˆ: AAPL"></td>
            <td><input type="number" value="${d.q||0}" class="q" oninput="saveAndCalc()"></td>
            <td><input type="number" value="${d.b||0}" class="b" oninput="saveAndCalc()"></td>
            <td><input type="number" value="${d.c||0}" class="c" readonly style="background:#f9f9f9;"></td>
            <td class="r" style="font-weight:bold">0%</td>
            <td><button onclick="this.closest('tr').remove();saveAndCalc();">âŒ</button></td>
        `;
        document.getElementById('list').appendChild(tr);
    }

    // ì‹¤ì‹œê°„ ê°€ê²© ì—…ë°ì´íŠ¸ (Yahoo Finance API í™œìš© ì˜ˆì‹œ ë¡œì§)
    async function updatePrices() {
        const btn = document.querySelector('.btn-update');
        btn.innerText = "â³ ì—…ë°ì´íŠ¸ ì¤‘...";
        
        const rows = document.querySelectorAll('#list tr');
        for (let row of rows) {
            const ticker = row.querySelector('.n').value.toUpperCase();
            if(!ticker) continue;

            try {
                // ì‹¤ì œ ë°°í¬ ì‹œì—ëŠ” ë°±ì—”ë“œë‚˜ í”„ë¡ì‹œê°€ í•„ìš”í•˜ì§€ë§Œ, 
                // ì—¬ê¸°ì„œëŠ” ì´í•´ë¥¼ ë•ê¸° ìœ„í•´ ê³µê°œ API í˜¸ì¶œ ë°©ì‹ì„ ì‹œë®¬ë ˆì´ì…˜í•©ë‹ˆë‹¤.
                const response = await fetch(`https://query1.finance.yahoo.com/v8/finance/chart/${ticker}`);
                const data = await response.json();
                const price = data.chart.result[0].meta.regularMarketPrice;
                
                if(price) {
                    row.querySelector('.c').value = price.toFixed(2);
                }
            } catch (e) {
                console.log(ticker + " ê°€ê²© ë¡œë”© ì‹¤íŒ¨");
            }
        }
        btn.innerText = "ğŸ”„ ì‹¤ì‹œê°„ ê°€ê²© ì—…ë°ì´íŠ¸";
        saveAndCalc();
    }

    function saveAndCalc() {
        const rows = document.querySelectorAll('#list tr');
        const data = Array.from(rows).map(row => {
            const q = parseFloat(row.querySelector('.q').value) || 0;
            const b = parseFloat(row.querySelector('.b').value) || 0;
            const c = parseFloat(row.querySelector('.c').value) || 0;
            const r = b > 0 ? ((c - b) / b * 100).toFixed(2) : 0;
            
            const rCell = row.querySelector('.r');
            rCell.innerText = r + "%";
            rCell.style.color = r >= 0 ? '#eb4d4b' : '#0984e3';

            return { n:row.querySelector('.n').value, q, b, c };
        });
        localStorage.setItem('myStockData_Pro', JSON.stringify(data));
    }

    window.onload = () => {
        const saved = JSON.parse(localStorage.getItem('myStockData_Pro') || '[]');
        if(saved.length) saved.forEach(addRow); else addRow();
        saveAndCalc();
    }
</script>
</body>
</html>
